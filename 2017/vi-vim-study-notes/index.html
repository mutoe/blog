<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.mutoe.com","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.19.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="注意：无插件 Vim 笔记。个人使用 Vim 作为 tty 编辑器和辅助开发工具配合主力 IDE 使用（IDEA Vim、VSCode Vim），为了保证通用性与便捷性，本文无插件。 Vi 作为 Unix 系统自带的编辑器，流传至今是有一定道理的。在连接进远程服务器时，并不一定能够使用 GUI 进行操作，此时又一个趁手的编辑器就尤为重要了。 那是不是会进入编辑模式，能保存文件就够用了呢？哈哈，是的">
<meta property="og:type" content="article">
<meta property="og:title" content="Vim 学习笔记（无插件）">
<meta property="og:url" content="https://blog.mutoe.com/2017/vi-vim-study-notes/">
<meta property="og:site_name" content="木头的博客">
<meta property="og:description" content="注意：无插件 Vim 笔记。个人使用 Vim 作为 tty 编辑器和辅助开发工具配合主力 IDE 使用（IDEA Vim、VSCode Vim），为了保证通用性与便捷性，本文无插件。 Vi 作为 Unix 系统自带的编辑器，流传至今是有一定道理的。在连接进远程服务器时，并不一定能够使用 GUI 进行操作，此时又一个趁手的编辑器就尤为重要了。 那是不是会进入编辑模式，能保存文件就够用了呢？哈哈，是的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.mutoe.com/2017/vi-vim-study-notes/vim-modes.png">
<meta property="og:image" content="https://static.mutoe.com/2017/vi-vim-study-notes/vi-vim-cheat-sheet-sch.gif">
<meta property="og:image" content="https://static.mutoe.com/2017/vi-vim-study-notes/command-line-mode.png">
<meta property="og:image" content="https://static.mutoe.com/2017/vi-vim-study-notes/vim-workspace2.png">
<meta property="og:image" content="https://static.mutoe.com/2017/vi-vim-study-notes/vim-workspace.png">
<meta property="article:published_time" content="2017-07-31T05:24:09.000Z">
<meta property="article:modified_time" content="2017-07-31T05:24:09.000Z">
<meta property="article:author" content="mutoe">
<meta property="article:tag" content="Vim">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.mutoe.com/2017/vi-vim-study-notes/vim-modes.png">


<link rel="canonical" href="https://blog.mutoe.com/2017/vi-vim-study-notes/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.mutoe.com/2017/vi-vim-study-notes/","path":"/2017/vi-vim-study-notes/","title":"Vim 学习笔记（无插件）"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Vim 学习笔记（无插件） | 木头的博客</title>
  







<meta name="referrer" content="no-referrer-when-downgrade">

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="木头的博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">木头的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">我是木头 有些想法 有点精力</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#normal-%E6%A8%A1%E5%BC%8F"><span class="nav-text">normal 模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#command-line-%E6%A8%A1%E5%BC%8F"><span class="nav-text">command-line 模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#visual-%E6%A8%A1%E5%BC%8F"><span class="nav-text">visual 模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ex-%E5%91%BD%E4%BB%A4"><span class="nav-text">Ex 命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%8C%BA"><span class="nav-text">工作区</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D-Session"><span class="nav-text">会话 (Session)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E9%A1%B5-Tab"><span class="nav-text">标签页 (Tab)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3-Window"><span class="nav-text">窗口 (Window)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA-Buffer"><span class="nav-text">缓冲区 (Buffer)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%87%E4%BB%B6"><span class="nav-text">文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%BC%80-x2F-%E4%BF%9D%E5%AD%98-x2F-%E9%80%80%E5%87%BA"><span class="nav-text">打开&#x2F;保存&#x2F;退出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%82%E8%B5%B7"><span class="nav-text">挂起</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-Vim-%E5%91%BD%E4%BB%A4"><span class="nav-text">通过 Vim 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-Shell-%E5%91%BD%E4%BB%A4"><span class="nav-text">通过 Shell 命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95"><span class="nav-text">目录</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B7%B3%E8%BD%AC"><span class="nav-text">跳转</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%89%E6%A0%87%E7%A7%BB%E5%8A%A8"><span class="nav-text">光标移动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E8%B7%B3%E8%BD%AC"><span class="nav-text">文件跳转</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%A6%E7%AD%BE"><span class="nav-text">书签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%96%E8%BE%91"><span class="nav-text">编辑</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#insert-%E6%A8%A1%E5%BC%8F"><span class="nav-text">insert 模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#insert-%E6%A8%A1%E5%BC%8F%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="nav-text">insert 模式一些实用的快捷键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#insert-%E6%A8%A1%E5%BC%8F%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8"><span class="nav-text">insert 模式自动补全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-text">表达式寄存器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%92%A4%E9%94%80%E3%80%81%E9%87%8D%E5%81%9A"><span class="nav-text">撤销、重做</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E3%80%81%E5%89%AA%E5%88%87%E3%80%81%E7%B2%98%E8%B4%B4"><span class="nav-text">复制、剪切、粘贴</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%AF%B9%E8%B1%A1-Text-Object"><span class="nav-text">文本对象 (Text Object)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%A9%E8%BF%9B"><span class="nav-text">缩进</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE"><span class="nav-text">查找</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%BF%E6%8D%A2"><span class="nav-text">替换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-text">寄存器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-text">作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%BF%E6%8D%A2%E6%A0%87%E5%BF%97"><span class="nav-text">替换标志</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-text">配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tips"><span class="nav-text">Tips</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-text">参考资料</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="mutoe"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">mutoe</p>
  <div class="site-description" itemprop="description">木头, 全学工程师</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">48</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/mutoe" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;mutoe" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:imutoe@gmail.com" title="E-Mail → mailto:imutoe@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.mutoe.com/2017/vi-vim-study-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="mutoe">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="木头的博客">
      <meta itemprop="description" content="木头, 全学工程师">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Vim 学习笔记（无插件） | 木头的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vim 学习笔记（无插件）<a href="https://github.com/mutoe/mutoe.github.io/tree/master/source/_posts/vi-vim-study-notes.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pen-nib"></i></a>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-31 13:24:09" itemprop="dateCreated datePublished" datetime="2017-07-31T13:24:09+08:00">2017-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p><strong>注意：无插件 Vim 笔记。个人使用 Vim 作为 tty 编辑器和辅助开发工具配合主力 IDE 使用（IDEA Vim、VSCode Vim），为了保证通用性与便捷性，本文无插件。</strong></p>
<p>Vi 作为 Unix 系统自带的编辑器，流传至今是有一定道理的。在连接进远程服务器时，并不一定能够使用 GUI 进行操作，此时又一个趁手的编辑器就尤为重要了。</p>
<p>那是不是会进入编辑模式，能保存文件就够用了呢？哈哈，是的，但是 Vim 的强大完全可以作为日常编辑器使用，能极大的提升开发效率(是一种以大脑空间换时间的思路)，一起来看看吧！</p>
<span id="more"></span>

<p>Vim 是 Vi 的升级版本，比 Vi 多了语法高亮等更多特性。就版本而言，软件的新版本往往会修正旧版的一些缺陷和不足，所以说能用新版本尽量使用最新版本。</p>
<h1 id="normal-模式"><a href="#normal-模式" class="headerlink" title="normal 模式">normal 模式</a></h1><p>Vim 和其他编辑器不一样，并不是一打开就可以输入文字，打开 Vim 后默认为 normal 模式。当我们处于 normal 模式时，键盘上的每个按键都对应着不同的功能。</p>
<ul>
<li>当我们想要编辑内容时，我们可以使用 <kbd>i</kbd> 键进入 insert 模式；</li>
<li>当我们想要保存时，可以使用 <code>:</code> 进入 command line 模式，然后输入 <code>wq</code> 命令进行保存 (write) 并退出 (quit)；</li>
<li>当我们想要搜索内容时，可以使用 <code>/</code> 进入 search 模式，然后键入想要搜索的内容按下 <kbd>ENTER</kbd>；</li>
<li>当我们想要选择某段文本时，我们可以按下 <kbd>v</kbd> 进入 visual 模式；</li>
</ul>
<p><img src="https://static.mutoe.com/2017/vi-vim-study-notes/vim-modes.png" alt="Vim modes"></p>
<p>在其他任意模式下，按 <kbd>ESC</kbd> 可以回到 normal 模式。</p>
<blockquote>
<p>Tips: 当你由于某种原因（比如使用网页中的 SSH 时）无法使用 <kbd>ESC</kbd> 键回到 normal 模式时，可以使用 <code>Ctrl-[</code> 键。</p>
</blockquote>
<p><img src="https://static.mutoe.com/2017/vi-vim-study-notes/vi-vim-cheat-sheet-sch.gif" alt="Vim cheat sheet"></p>
<h1 id="command-line-模式"><a href="#command-line-模式" class="headerlink" title="command-line 模式">command-line 模式</a></h1><p>按下 <code>:</code> 进入命令模式，此时 Vim 底部应该出现 <code>:</code> 并等待进一步命令输入</p>
<p><img src="https://static.mutoe.com/2017/vi-vim-study-notes/command-line-mode.png" alt="Command line mode"></p>
<blockquote>
<p>下文中以 <code>:</code> 开头的命令均为 command-line 模式下的命令</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:r! &#123;cmd&#125;</code></td>
<td align="left">将 <code>&#123;cmd&#125;</code> 的输出插入到光标处</td>
</tr>
<tr>
<td><code>:[range]s/pattern/target/gi</code></td>
<td align="left">替换，在 <code>[range]</code> 范围内查找 <code>pattern</code> 然后替换为 <code>target</code></td>
</tr>
<tr>
<td><code>:[range]g/pattern/cmd</code></td>
<td align="left">查找，在 <code>[range]</code> 范围内查找 <code>pattern</code> 然后执行 <code>cmd</code> 命令</td>
</tr>
</tbody></table>
<details>
<summary>命令 `:g` 的一些例子</summary>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看含有 pattern 的相关 5 行内容</span></span><br><span class="line">:g/pattern/z<span class="comment">#.5</span></span><br><span class="line">:g/pattern/z<span class="comment">#.5|echo &quot;======&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除含有 pattern 的所有行</span></span><br><span class="line">:g/pattern/d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除所有空行</span></span><br><span class="line">:g/^\s*$/d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除不含有 pattern 的所有行</span></span><br><span class="line">:g!/pattern/d</span><br><span class="line">:v/pattern/d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除所有重复的行</span></span><br><span class="line">:g/^\(.*\)\(\r\?\n\1\)\+$/d</span><br><span class="line">:%!<span class="built_in">uniq</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在标记 a 和 b 定义的范围内搜索含有 pattern 行中替换字符串 pattern2 为 replaced</span></span><br><span class="line">:<span class="string">&#x27;a,&#x27;</span><span class="built_in">bg</span>/pattern/s/pattern2/replaced/gi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给每一行添加一个空行</span></span><br><span class="line">:g/^/pu =\&quot;\n\&quot;</span><br><span class="line">:g/^/pu _ <span class="comment"># 从黑洞寄存器 (_) 中插入</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制所有含有 pattern 的行到寄存器 a</span></span><br><span class="line">:g/pattern/y a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制所有含有 pattern 的行到文件末尾</span></span><br><span class="line">:g/pattern/t$</span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动所有含有 pattern 的行到文件末尾</span></span><br><span class="line">:g/pattern/m$</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从当前行到最后一行中，所有行头的数字自增 1 (相当于 normal 模式下按 `Ctrl-a`)</span></span><br><span class="line">:.,<span class="variable">$g</span>/^\d/exe <span class="string">&quot;normal! \&lt;C-A&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在所有匹配的行中执行寄存器 a 中的宏</span></span><br><span class="line">:g/pattern/normal @a</span><br></pre></td></tr></table></figure>

</details>

<p>command-line 模式一些实用的快捷键</p>
<table>
<thead>
<tr>
<th>按键 (command-line 模式)</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>Ctrl-[</code> <code>Ctrl-c</code></td>
<td align="left">退出 command-line 模式，相当于按下 <kbd>ESC</kbd></td>
</tr>
<tr>
<td><code>Ctrl-m</code> <code>Ctrl-j</code></td>
<td align="left">执行命令，相当于按下 <kbd>ENTER</kbd></td>
</tr>
<tr>
<td><kbd>UP</kbd> &#x2F; <kbd>DOWN</kbd></td>
<td align="left">重复上一次命令 &#x2F; 回退一条</td>
</tr>
<tr>
<td><kbd>INSERT</kbd></td>
<td align="left">切换插入模式和替换模式</td>
</tr>
<tr>
<td><kbd>HOME</kbd> <code>Ctrl-b</code></td>
<td align="left">光标跳到行首</td>
</tr>
<tr>
<td><kbd>END</kbd> <code>Ctrl-e</code></td>
<td align="left">光标跳到行尾</td>
</tr>
<tr>
<td><kbd>BACKSPACE</kbd> <code>Ctrl-h</code></td>
<td align="left">删除光标前的字符</td>
</tr>
<tr>
<td><kbd>DELETE</kbd></td>
<td align="left">删除光标处的字符</td>
</tr>
<tr>
<td><code>Ctrl-w</code></td>
<td align="left">删除光标处以前的单词</td>
</tr>
<tr>
<td><code>Ctrl-u</code></td>
<td align="left">删除光标处到行首</td>
</tr>
<tr>
<td><code>Ctrl-d</code></td>
<td align="left">命令补全</td>
</tr>
<tr>
<td><code>Ctrl-r &#123;x&#125;</code></td>
<td align="left">粘贴某寄存器 <code>&#123;x&#125;</code> 内容</td>
</tr>
<tr>
<td><code>Ctrl-r Ctrl-f</code></td>
<td align="left">粘贴光标处的文件名</td>
</tr>
<tr>
<td><code>Ctrl-r Ctrl-p</code></td>
<td align="left">粘贴光标处的文件名, expand path</td>
</tr>
<tr>
<td><code>Ctrl-r Ctrl-w</code></td>
<td align="left">粘贴光标处的单词(inner)</td>
</tr>
<tr>
<td><code>Ctrl-r Ctrl-a</code></td>
<td align="left">粘贴光标处的单词(around)</td>
</tr>
</tbody></table>
<h2 id="visual-模式"><a href="#visual-模式" class="headerlink" title="visual 模式">visual 模式</a></h2><table>
<thead>
<tr>
<th>按键</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>v</code></td>
<td>进入可视模式</td>
</tr>
<tr>
<td><code>V</code></td>
<td>进入行可视模式</td>
</tr>
<tr>
<td><code>Ctrl-v</code></td>
<td>进入列可视模式</td>
</tr>
<tr>
<td><code>gv</code></td>
<td>重选上次的高亮选区</td>
</tr>
<tr>
<td><code>Ctrl-g</code></td>
<td>在 visual 和 select 模式间替换</td>
</tr>
<tr>
<td><code>o</code></td>
<td>切换选区的端点</td>
</tr>
</tbody></table>
<h3 id="Ex-命令"><a href="#Ex-命令" class="headerlink" title="Ex 命令">Ex 命令</a></h3><p>在 visual 模式下直接键入 <code>:</code> 键可以将当前选区标记并进入 Ex 命令模式，此时可以配合一些命令达到目的。</p>
<blockquote>
<p>以下命令都可只键入首字母而省略其他字符</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:[range]print</code></td>
<td align="left">打印指定的行在窗口底部</td>
</tr>
<tr>
<td><code>:[range]delete [x]</code></td>
<td align="left">删除指定范围内的行[到寄存器 x 中]</td>
</tr>
<tr>
<td><code>:[range]yank [x]</code></td>
<td align="left">复制指定范围内的行[到寄存器 x 中]</td>
</tr>
<tr>
<td><code>:[line]put [x]</code></td>
<td align="left">在指定行后粘贴寄存器 x 中的内容</td>
</tr>
<tr>
<td><code>:[range]copy &#123;address&#125;</code> <code>:[range]t &#123;address&#125;</code></td>
<td align="left">把指定范围内的行拷贝到 {address} 所指定的行之下</td>
</tr>
<tr>
<td><code>:[range]move &#123;address&#125;</code></td>
<td align="left">把指定范围内的行移动到 {address} 所指定的行之下</td>
</tr>
<tr>
<td><code>:[range]join</code></td>
<td align="left">合并指定范围内的行</td>
</tr>
<tr>
<td><code>:[range]normal &#123;commands&#125;</code></td>
<td align="left">对指定范围内的每一行执行普通模式命令 {commands}</td>
</tr>
<tr>
<td><code>:[range]substitute/&#123;pattern&#125;/&#123;string&#125;/[flags]</code></td>
<td align="left">把指定范围内出现{pattern}的地方替换为{string}</td>
</tr>
<tr>
<td><code>:[range]global/&#123;pattern&#125;/[cmd]</code></td>
<td align="left">对指定范围内匹配{pattern}的所有行，在其上执行 Ex 命令{cmd}</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>range &#x2F; address</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>0</code> <code>1</code> … <code>&#123;n&#125;</code></td>
<td align="left">第 n 行</td>
</tr>
<tr>
<td><code>$</code></td>
<td align="left">最后一行</td>
</tr>
<tr>
<td><code>.</code></td>
<td align="left">光标所在行</td>
</tr>
<tr>
<td><code>&#39;m</code></td>
<td align="left">标记 m 所在的行</td>
</tr>
<tr>
<td><code>&#39;&lt;</code> &#x2F; <code>&#39;&gt;</code></td>
<td align="left">选区开始&#x2F;结束的行</td>
</tr>
<tr>
<td><code>%</code> &#x2F; <code>1,$</code></td>
<td align="left">整个文件</td>
</tr>
<tr>
<td><code>/regexp/</code></td>
<td align="left">正则匹配某行</td>
</tr>
<tr>
<td><code>&#123;range&#125;+[n]</code> &#x2F; <code>&#123;range&#125;-[n]</code></td>
<td align="left">向后&#x2F;前偏移 n 行，当 n 不指定时，默认为 1</td>
</tr>
</tbody></table>
<h1 id="工作区"><a href="#工作区" class="headerlink" title="工作区">工作区</a></h1><p><img src="https://static.mutoe.com/2017/vi-vim-study-notes/vim-workspace2.png" alt="Real Vim workspace"></p>
<p><img src="https://static.mutoe.com/2017/vi-vim-study-notes/vim-workspace.png" alt="Vim workspace structure"></p>
<h2 id="会话-Session"><a href="#会话-Session" class="headerlink" title="会话 (Session)">会话 (Session)</a></h2><p>你可以将你当前打开的 Window 和 Tab 保存成为 Session，下次读取 Session 可直接恢复上次工作区状态</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:mksession session_file.vim</code></td>
<td>将当前工作区保存在会话中</td>
</tr>
<tr>
<td><code>:mksession! session_file.vim</code></td>
<td>将当前工作区保存在会话中，覆盖</td>
</tr>
</tbody></table>
<p>然后使用 <code>:qa</code> 或 <code>:wqa</code> 来退出 vim，下次就可以使用 <code>vim -S session_file.vim</code> 来恢复会话啦</p>
<h2 id="标签页-Tab"><a href="#标签页-Tab" class="headerlink" title="标签页 (Tab)">标签页 (Tab)</a></h2><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:Te</code></td>
<td>打开一个新标签页</td>
</tr>
<tr>
<td><code>gt</code> &#x2F; <code>gT</code></td>
<td>到下&#x2F;上一个标签页</td>
</tr>
<tr>
<td><code>2gt</code></td>
<td>到第 2 个标签页</td>
</tr>
<tr>
<td><code>:tabs</code></td>
<td>查看所有标签页</td>
</tr>
<tr>
<td><code>:tabclose 2</code></td>
<td>关闭第 2 个标签页</td>
</tr>
<tr>
<td><code>:bufdo tab split</code></td>
<td>将缓冲区的文件转成 tab</td>
</tr>
</tbody></table>
<h2 id="窗口-Window"><a href="#窗口-Window" class="headerlink" title="窗口 (Window)">窗口 (Window)</a></h2><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:E</code></td>
<td>在当前窗口打开目录</td>
</tr>
<tr>
<td><code>:He</code> &#x2F; <code>:He!</code></td>
<td>在当前窗口下&#x2F;上方打开目录</td>
</tr>
<tr>
<td><code>:Ve</code> &#x2F; <code>:Ve!</code></td>
<td>在当前窗口右&#x2F;左方打开目录</td>
</tr>
<tr>
<td><code>Ctrl-w v</code> <code>:vsp filename</code></td>
<td>左右分割窗口</td>
</tr>
<tr>
<td><code>Ctrl-w s</code> <code>:sp filename</code></td>
<td>上下分割窗口</td>
</tr>
<tr>
<td><code>Ctrl-w c</code></td>
<td>关闭当前窗口</td>
</tr>
<tr>
<td><code>Ctrl-w q</code></td>
<td>关闭当前窗口, 如果是最后一个窗口则退出 Vim</td>
</tr>
<tr>
<td><code>Ctrl-w w</code></td>
<td>移动光标到下一个窗口</td>
</tr>
<tr>
<td><code>Ctrl-w l</code> &#x2F; <code>Ctrl-w h</code></td>
<td>移动光标到右&#x2F;左边的窗口</td>
</tr>
<tr>
<td><code>Ctrl-w j</code> &#x2F; <code>Ctrl-w k</code></td>
<td>移动光标到下&#x2F;上边的窗口</td>
</tr>
<tr>
<td><code>Ctrl-w L</code> &#x2F; <code>Ctrl-w H</code></td>
<td>移动窗口到左&#x2F;右边</td>
</tr>
<tr>
<td><code>Ctrl-w J</code> &#x2F; <code>Ctrl-w K</code></td>
<td>移动窗口到下&#x2F;上边</td>
</tr>
<tr>
<td><code>Ctrl-w &lt;</code> &#x2F; <code>Ctrl-w &gt;</code></td>
<td>垂直分屏向左&#x2F;右调整窗口大小</td>
</tr>
<tr>
<td><code>Ctrl-w -</code> &#x2F; <code>Ctrl-w +</code></td>
<td>水平分屏向上&#x2F;下调整窗口大小</td>
</tr>
<tr>
<td><code>Ctrl-w _</code> &#x2F; <code>Ctrl-w |</code></td>
<td>调整窗口到最大高&#x2F;宽度</td>
</tr>
<tr>
<td><code>Ctrl-w =</code></td>
<td>重置窗口大小</td>
</tr>
</tbody></table>
<blockquote>
<p>调整窗口大小的命令可以配合数字来达到重复的效果，如 <code>Ctrl-w 10 +</code></p>
</blockquote>
<h2 id="缓冲区-Buffer"><a href="#缓冲区-Buffer" class="headerlink" title="缓冲区 (Buffer)">缓冲区 (Buffer)</a></h2><p>当你打开多个文件时，这些文件都保存在缓冲区中，你可以使用 <code>:ls</code> 查看缓冲区内容，然后使用 <code>:buffer [n]</code> 查看缓冲区 n 中的文件</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:ls</code> <code>:buffers</code></td>
<td>查看缓冲区文件</td>
</tr>
<tr>
<td><code>:b &#123;n&#125;</code> <code>:buffer &#123;n&#125;</code></td>
<td>查看缓冲区 <code>&#123;n&#125;</code> 的文件</td>
</tr>
<tr>
<td><code>:bnext</code> <code>:bn</code></td>
<td>查看下一个缓冲区文件</td>
</tr>
<tr>
<td><code>:bprevious</code> <code>:bp</code></td>
<td>查看上一个缓冲区文件</td>
</tr>
<tr>
<td><code>:blast</code> <code>:bl</code></td>
<td>查看最后一个缓冲区文件</td>
</tr>
<tr>
<td><code>:bfirst</code> <code>:bf</code></td>
<td>查看第一个缓冲区文件</td>
</tr>
</tbody></table>
<p>在使用 <code>:ls</code> 查看缓冲区内容后，可以看到文件名前有个 <code>%</code> 符号</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td><code>–</code></td>
<td>非活动的缓冲区</td>
</tr>
<tr>
<td><code>a</code></td>
<td>当前被激活缓冲区</td>
</tr>
<tr>
<td><code>h</code></td>
<td>隐藏的缓冲区</td>
</tr>
<tr>
<td><code>%</code></td>
<td>当前的缓冲区</td>
</tr>
<tr>
<td><code>#</code></td>
<td>交换缓冲区</td>
</tr>
<tr>
<td><code>=</code></td>
<td>只读缓冲区</td>
</tr>
<tr>
<td><code>+</code></td>
<td>已经更改的缓冲区</td>
</tr>
</tbody></table>
<h1 id="文件"><a href="#文件" class="headerlink" title="文件">文件</a></h1><p>Vim 打开后默认在 normal 模式，要进行文件操作，我们需要进入到命令模式，按下 <kbd>:</kbd> 进入命令模式</p>
<h2 id="打开-x2F-保存-x2F-退出"><a href="#打开-x2F-保存-x2F-退出" class="headerlink" title="打开&#x2F;保存&#x2F;退出">打开&#x2F;保存&#x2F;退出</a></h2><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:w</code></td>
<td>保存</td>
</tr>
<tr>
<td><code>:w &#123;filename&#125;</code></td>
<td>另存为</td>
</tr>
<tr>
<td><code>:1,3w &#123;filename&#125;</code></td>
<td>将 1-3 行另存为 filename（参考<a href="">范围限定符</a>）</td>
</tr>
<tr>
<td><code>:1,3w &gt;&gt; &#123;filename&#125;</code></td>
<td>将 1-3 行追加到 filename 末尾</td>
</tr>
<tr>
<td><code>:q</code></td>
<td>退出（如果有改动则会退出失败）</td>
</tr>
<tr>
<td><code>:q!</code> <code>ZQ</code></td>
<td>抛弃修改并退出</td>
</tr>
<tr>
<td><code>:wq</code></td>
<td>保存并退出</td>
</tr>
<tr>
<td><code>:x</code> <code>ZZ</code></td>
<td>保存并退出（如果有修改，否则直接退出）</td>
</tr>
<tr>
<td><code>:cq</code></td>
<td>以非零状态(non zero)退出（如使用 vimdiff 想放弃修改时）</td>
</tr>
</tbody></table>
<h2 id="挂起"><a href="#挂起" class="headerlink" title="挂起">挂起</a></h2><h3 id="通过-Vim-命令"><a href="#通过-Vim-命令" class="headerlink" title="通过 Vim 命令">通过 Vim 命令</a></h3><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:!&#123;cmd&#125;</code></td>
<td>用来执行某一条 shell 命令。如 <code>:!cat database.conf</code></td>
</tr>
<tr>
<td><code>:sh</code></td>
<td>进入 shell 环境。执行结束需要返回 Vim 编辑环境时，输入 <code>exit</code> 或按下 <code>Ctrl-d</code> 即可。</td>
</tr>
</tbody></table>
<h3 id="通过-Shell-命令"><a href="#通过-Shell-命令" class="headerlink" title="通过 Shell 命令">通过 Shell 命令</a></h3><p>利用 Linux 作业机制，按下 <code>Ctrl-z</code> 将当前程序放在后台执行。然后使用 <code>fg</code> 命令重新回到 Vim 编辑器。
详情参考<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_673ee2b50100iywr.html">Unix 或 Linux 中&amp;、jobs、fg、bg 等命令的使用方法</a></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录">目录</a></h2><p>可以在启动 Vim 时指定一个目录，进入 Vim 时将进入 Explore 模式. 如 <code>vim /etc/nginx/conf.d</code></p>
<p>在 normal 模式下，键入 <code>:E</code> 可以打开当前文件所在目录（Explore 模式），然后可以使用 <code>j</code> <code>k</code> 选择目录</p>
<table>
<thead>
<tr>
<th>按键(在 Explore 模式下)</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>j</code></td>
<td>选择下一个文件</td>
</tr>
<tr>
<td><code>k</code></td>
<td>选择上一个文件</td>
</tr>
<tr>
<td><code>-</code></td>
<td>前往上一级目录</td>
</tr>
<tr>
<td><code>R</code></td>
<td>重命名</td>
</tr>
<tr>
<td><code>D</code></td>
<td>删除文件</td>
</tr>
<tr>
<td><code>s</code></td>
<td>切换排序（name&#x2F;time&#x2F;size&#x2F;extension）</td>
</tr>
<tr>
<td><code>x</code></td>
<td>执行文件</td>
</tr>
</tbody></table>
<h1 id="跳转"><a href="#跳转" class="headerlink" title="跳转">跳转</a></h1><h2 id="光标移动"><a href="#光标移动" class="headerlink" title="光标移动">光标移动</a></h2><table>
<thead>
<tr>
<th>按键（单位从小到大）</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>h</code> &#x2F; <code>l</code></td>
<td align="left">光标向左&#x2F;右移动</td>
</tr>
<tr>
<td><code>w</code> <code>W</code> &#x2F; <code>b</code> <code>B</code></td>
<td align="left">移动到下一个词&#x2F;上一个词的开头（<code>W</code> <code>B</code>会忽略连字符）</td>
</tr>
<tr>
<td><code>e</code> <code>E</code></td>
<td align="left">移动到当前词的末尾（<code>E</code>会忽略连字符）</td>
</tr>
<tr>
<td><code>0</code> &#x2F; <code>^</code> &#x2F; <code>$</code></td>
<td align="left">移动到硬行首&#x2F;软行首(缩进后)&#x2F;行尾</td>
</tr>
<tr>
<td><code>j</code> &#x2F; <code>k</code></td>
<td align="left">光标向下&#x2F;上移动一行</td>
</tr>
<tr>
<td><code>(</code> &#x2F; <code>)</code></td>
<td align="left">移动到语句的开头&#x2F;末尾</td>
</tr>
<tr>
<td><code>&#123;</code> &#x2F; <code>&#125;</code></td>
<td align="left">移动到段落的开头&#x2F;末尾</td>
</tr>
<tr>
<td><code>%</code></td>
<td align="left">跳转到匹配的括号</td>
</tr>
<tr>
<td><code>20g</code> <code>:20</code></td>
<td align="left">跳转到 20 行</td>
</tr>
<tr>
<td><code>zt</code> &#x2F; <code>zz</code> &#x2F; <code>zb</code></td>
<td align="left">让光标所在行居于屏幕顶部&#x2F;中央&#x2F;底部</td>
</tr>
<tr>
<td><code>H</code> &#x2F; <code>M</code> &#x2F; <code>L</code></td>
<td align="left">跳转到当前屏幕的顶部&#x2F;中央&#x2F;底部行</td>
</tr>
<tr>
<td><code>Ctrl-y</code> &#x2F; <code>Ctrl-e</code></td>
<td align="left">向上&#x2F;下滚一行</td>
</tr>
<tr>
<td><code>Ctrl-u</code> &#x2F; <code>Ctrl-d</code></td>
<td align="left">向上&#x2F;下翻半页 (up)</td>
</tr>
<tr>
<td><code>Ctrl-b</code> &#x2F; <code>Ctrl-f</code></td>
<td align="left">向上&#x2F;下翻一整页 (backward)</td>
</tr>
<tr>
<td><code>gg</code> <code>:0</code> &#x2F; <code>G</code> <code>:$</code></td>
<td align="left">跳转到文件开始&#x2F;末尾</td>
</tr>
<tr>
<td><code>\</code>.&#96;</td>
<td align="left">跳转到光标上一次位置</td>
</tr>
<tr>
<td><code>&#39;.</code></td>
<td align="left">跳转到光标上一次位置所处的行</td>
</tr>
<tr>
<td><code>Ctrl-i</code> &#x2F; <code>Ctrl-o</code></td>
<td align="left">向前&#x2F;后追溯<a href="">跳转列表(jumplist)</a></td>
</tr>
</tbody></table>
<p>这些操作之前都可以加上数字来控制接下来的操作执行多少次，例如按下<code>20j</code>向下跳转 20 行，<code>5Ctrl-e</code>向下滚动 5 行</p>
<h2 id="文件跳转"><a href="#文件跳转" class="headerlink" title="文件跳转">文件跳转</a></h2><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>:bnext</code> <code>:bn</code></td>
<td>查看下一个缓冲区文件</td>
</tr>
</tbody></table>
<h2 id="书签"><a href="#书签" class="headerlink" title="书签">书签</a></h2><p><a target="_blank" rel="noopener" href="http://vimdoc.sourceforge.net/htmldoc/motion.html#:marks">marks help</a></p>
<p>跳转到书签可以使用 <code>&#39;</code> 和 <code>\``, 书签名称可以是 a-z A-Z。书签无法直观的看到, 可以通过 </code>:marks&#96; 命令查看所有书签。</p>
<ul>
<li>&#96;`&#96; 表示跳转到某书签精确到行和列</li>
<li><code>&#39;</code> 表示跳转到某书签的软行首</li>
<li>小写书签名 a-z 表示当前 Buffer 内的标签, 如果 Buffer 被移除, 书签会一并被删除。</li>
<li>大写书签名 A-Z 表示全局书签</li>
<li>数字书签名 0-9 不可直接设置，它们仅在 ‘viminfo’ 文件中存在，其中 ‘0’ 时随后一次退出 Vim 时光标的位置</li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>ma</code></td>
<td>创建一个本地书签 ‘a’</td>
</tr>
<tr>
<td><code>&#39;a</code></td>
<td>跳转到本地书签 ‘a’</td>
</tr>
<tr>
<td><code>g&#39;a</code></td>
<td>跳转到书签 ‘a’ (不记录到 jumplist 中)</td>
</tr>
<tr>
<td><code>&#39;.</code></td>
<td>跳转到最后一次执行改变的位置</td>
</tr>
<tr>
<td><code>m&#39;</code></td>
<td>设置一个上下文标记</td>
</tr>
<tr>
<td><code>&#39;&#39;</code></td>
<td>到最后一次跳转之前的位置</td>
</tr>
<tr>
<td><code>&#39;&quot;</code></td>
<td>跳转到最后一次退出当前缓冲区时的光标位置</td>
</tr>
<tr>
<td><code>&#39;[</code></td>
<td>跳转到上一次修改或粘贴的位置头部</td>
</tr>
<tr>
<td><code>&#39;]</code></td>
<td>跳转到上一次修改或粘贴的位置尾部</td>
</tr>
<tr>
<td><code>&#39;&lt;</code></td>
<td>跳转到上次选区时位置头部</td>
</tr>
<tr>
<td><code>&#39;&gt;</code></td>
<td>跳转到上次选区时位置尾部</td>
</tr>
<tr>
<td><code>:marks</code></td>
<td>显示所有书签</td>
</tr>
<tr>
<td><code>:marks</code></td>
<td>显示所有书签</td>
</tr>
<tr>
<td><code>:marks a</code></td>
<td>显示书签 ‘a’ 的详细内容</td>
</tr>
<tr>
<td><code>:delm[arks] a</code></td>
<td>删除书签 ‘a’</td>
</tr>
<tr>
<td><code>:delm[arks]!</code></td>
<td>删除所有本地书签</td>
</tr>
</tbody></table>
<h1 id="编辑"><a href="#编辑" class="headerlink" title="编辑">编辑</a></h1><h2 id="insert-模式"><a href="#insert-模式" class="headerlink" title="insert 模式">insert 模式</a></h2><p>刚打开 vim 时处于 normal 模式，我们需要进入 insert 模式才可以输入内容。</p>
<table>
<thead>
<tr>
<th>按键</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>i</code> &#x2F; <code>a</code></td>
<td align="left">在光标位置前面&#x2F;后面进入 insert 模式</td>
</tr>
<tr>
<td><code>I</code> &#x2F; <code>A</code></td>
<td align="left">在软行首&#x2F;行尾位置进入 insert 模式</td>
</tr>
<tr>
<td><code>o</code> &#x2F; <code>O</code></td>
<td align="left">在下一行&#x2F;上一行新起一行进入 insert 模式</td>
</tr>
<tr>
<td><code>c</code></td>
<td align="left">删除当前<a href="">文本对象</a>并进入 insert 模式</td>
</tr>
<tr>
<td><code>C</code> <code>c$</code></td>
<td align="left">删除到行尾进入 insert 模式</td>
</tr>
<tr>
<td><code>s</code></td>
<td align="left">删除当前字符进入 insert 模式</td>
</tr>
<tr>
<td><code>r</code></td>
<td align="left">用接下来的一个字符替换当前字符</td>
</tr>
<tr>
<td><code>R</code></td>
<td align="left">在光标位置进入 replace 模式</td>
</tr>
</tbody></table>
<blockquote>
<p>replace 模式类似于 insert 模式，不同之处为 replace 模式会逐个替换光标下的字符而非插入。</p>
</blockquote>
<p>在 insert 模式下，按下 <kdb>ESC</kbd> 退出 insert 模式回到 normal 模式</p>
<h3 id="insert-模式一些实用的快捷键"><a href="#insert-模式一些实用的快捷键" class="headerlink" title="insert 模式一些实用的快捷键">insert 模式一些实用的快捷键</a></h3><table>
<thead>
<tr>
<th>按键(insert 模式)</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>Ctrl-[</code> <code>Ctrl-c</code></td>
<td align="left">退出 insert 模式，相当于按下 <kbd>ESC</kbd></td>
</tr>
<tr>
<td><code>Ctrl-j</code> <code>Ctrl-m</code></td>
<td align="left">换行，相当于按下 <kbd>ENTER</kbd></td>
</tr>
<tr>
<td><code>Ctrl-i</code></td>
<td align="left">相当于按下 <kbd>TAB</kbd></td>
</tr>
<tr>
<td><code>Ctrl-h</code></td>
<td align="left">删除光标前的一个字符，相当于按下 <kbd>BACKSPACE</kbd></td>
</tr>
<tr>
<td><kbd>DELETE</kbd></td>
<td align="left">删除光标处的字符</td>
</tr>
<tr>
<td><kbd>INSERT</kbd></td>
<td align="left">在 insert 模式和 replace 模式间互换</td>
</tr>
<tr>
<td><code>Ctrl-w</code></td>
<td align="left">删除光标前的单词</td>
</tr>
<tr>
<td><code>Ctrl-u</code></td>
<td align="left">删除当前行光标前的字符</td>
</tr>
<tr>
<td><code>Ctrl-a</code></td>
<td align="left">插入上次 insert 模式下输入的字符</td>
</tr>
<tr>
<td><code>Ctrl-n</code> &#x2F; <code>Ctrl-p</code></td>
<td align="left">查找下一个 &#x2F; 上一个关键字</td>
</tr>
<tr>
<td><code>Ctrl-t</code> &#x2F; <code>Ctrl-d</code></td>
<td align="left">向右 &#x2F; 向左缩进一次</td>
</tr>
<tr>
<td><code>0 Ctrl-d</code> &#x2F; <code>^ Ctrl-d</code></td>
<td align="left">删除所有缩进, 带有 <code>^</code> 的缩进删除将会在下一行恢复</td>
</tr>
<tr>
<td><code>Ctrl-y</code> <code>Ctrl-e</code></td>
<td align="left">插入光标上一行 &#x2F; 下一行对应的字符</td>
</tr>
<tr>
<td><code>Ctrl-o</code></td>
<td align="left">临时执行一条 normal 模式下的命令，然后回到 insert 模式</td>
</tr>
<tr>
<td><code>Ctrl-r &#123;x&#125;</code></td>
<td align="left">插入寄存器 <code>&#123;x&#125;</code> 中的内容</td>
</tr>
<tr>
<td><code>Ctrl-r Ctrl-r &#123;x&#125;</code></td>
<td align="left">插入寄存器 <code>&#123;x&#125;</code> 中的内容 (Raw)</td>
</tr>
<tr>
<td><code>Ctrl-r Ctrl-o &#123;x&#125;</code></td>
<td align="left">插入寄存器 <code>&#123;x&#125;</code> 中的内容，不进行自动缩进</td>
</tr>
<tr>
<td><code>Ctrl-r Ctrl-p &#123;x&#125;</code></td>
<td align="left">插入寄存器 <code>&#123;x&#125;</code> 中的内容，自动缩进</td>
</tr>
</tbody></table>
<h3 id="insert-模式自动补全"><a href="#insert-模式自动补全" class="headerlink" title="insert 模式自动补全">insert 模式自动补全</a></h3><p>在 insert 模式下，可以使用 <code>Ctrl-x</code> 进入一个子模式，用语一些复杂关键字的补全（例如复杂的函数名或文件名）</p>
<table>
<thead>
<tr>
<th>按键(insert 模式)</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>Ctrl-x Ctrl-l</code></td>
<td align="left">补全整行，搜索和当前行光标前字符序列相同的行</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-n</code></td>
<td align="left">补全当前文件内的关键字</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-k</code></td>
<td align="left">补全 ‘dictionary’ 的关键字</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-t</code></td>
<td align="left">补全 ‘thesaurus’ 的关键字</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-i</code></td>
<td align="left">补全当前文件和头文件内的的关键字</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-f</code></td>
<td align="left">补全文件名</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-d</code></td>
<td align="left">补全定义或宏</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-v</code></td>
<td align="left">补全 Vim 命令</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-u</code></td>
<td align="left">用户定义补全</td>
</tr>
<tr>
<td><code>Ctrl-x Ctrl-o</code></td>
<td align="left">全能 (omni) 补全</td>
</tr>
<tr>
<td><code>Ctrl-x s</code></td>
<td align="left">拼写建议</td>
</tr>
<tr>
<td><code>Ctrl-n</code> &#x2F; <code>Ctrl-p</code></td>
<td align="left">向前 &#x2F; 向后光标前的关键字并插入</td>
</tr>
</tbody></table>
<h3 id="表达式寄存器"><a href="#表达式寄存器" class="headerlink" title="表达式寄存器">表达式寄存器</a></h3><p>在插入模式下，键入 <code>Ctrl-r=</code> 会进入表达式输入模式，此时只需键入简单的算数表达式即可输入对应的值并插入到文档中。</p>
<h2 id="撤销、重做"><a href="#撤销、重做" class="headerlink" title="撤销、重做">撤销、重做</a></h2><table>
<thead>
<tr>
<th>按键</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>u</code></td>
<td align="left">撤销</td>
</tr>
<tr>
<td><code>Ctrl-r</code></td>
<td align="left">重做</td>
</tr>
<tr>
<td><code>.</code></td>
<td align="left">重复上一次操作</td>
</tr>
<tr>
<td><code>;</code></td>
<td align="left">重复上一次行内查找 (f&#x2F;F&#x2F;t&#x2F;T)</td>
</tr>
</tbody></table>
<h2 id="复制、剪切、粘贴"><a href="#复制、剪切、粘贴" class="headerlink" title="复制、剪切、粘贴">复制、剪切、粘贴</a></h2><p>在 normal 模式下按下 <code>y</code> 进入复制模式，按下 <code>d</code> 进入删除（剪切）模式。</p>
<p>接下来只需要跟跳转命令（如<code>0</code>(行首) <code>G</code>(文件末尾)）即可操作相应的范围</p>
<p><strong>需要注意的是，删除时会将移除的内容放入剪贴板。</strong></p>
<table>
<thead>
<tr>
<th>按键</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>yy</code> <code>Y</code></td>
<td align="left">复制当前行</td>
</tr>
<tr>
<td><code>yG</code></td>
<td align="left">复制到文件末尾</td>
</tr>
<tr>
<td><code>y$</code></td>
<td align="left">复制到行尾</td>
</tr>
<tr>
<td><code>6yy</code> <code>y6y</code></td>
<td align="left">复制 6 行</td>
</tr>
<tr>
<td><code>ggvGy</code> <code>ggyG</code> <code>:%y</code></td>
<td align="left">复制整个文件</td>
</tr>
<tr>
<td><code>dd</code></td>
<td align="left">删除当前行</td>
</tr>
<tr>
<td><code>dw</code></td>
<td align="left">删除单词末尾</td>
</tr>
<tr>
<td><code>x</code> &#x2F; <code>X</code></td>
<td align="left">向后删除字符(delete) &#x2F; 退格(backspace)</td>
</tr>
<tr>
<td><code>10x</code> <code>d10l</code></td>
<td align="left">向后删除 10 个字符 (仅限当前行)</td>
</tr>
<tr>
<td><code>d$</code> <code>D</code></td>
<td align="left">删除到行尾</td>
</tr>
<tr>
<td><code>dG</code></td>
<td align="left">删除到文件末尾</td>
</tr>
<tr>
<td><code>d10G</code></td>
<td align="left">删除当前行到第 10 行</td>
</tr>
<tr>
<td><code>p</code> &#x2F; <code>P</code></td>
<td align="left">粘贴在光标后面 &#x2F; 前面</td>
</tr>
<tr>
<td><code>2p</code></td>
<td align="left">粘贴 2 次</td>
</tr>
<tr>
<td><code>Ctrl-r &#123;x&#125;</code></td>
<td align="left">在 insert 模式或命令模式下粘贴 <code>x</code> 寄存器的内容</td>
</tr>
</tbody></table>
<p>你还可以在选区模式下按下 <code>y</code> 复制整个选区，按下 <code>d</code> 剪切选区</p>
<p>值得注意的是，vim 的剪贴板是带有寄存器（Register）的，类似历史记录功能，你可以将不同的内容复制到某一个寄存器内，粘贴时选择相应的寄存器即可。</p>
<p>要使用寄存器，具体的使用方法是在复制&#x2F;剪切&#x2F;粘贴命令前输入<code>&quot;x</code>，其中 <code>x</code> 可以是 <code>a-z</code> 和 <code>*</code> 还有 <code>&quot;</code>，如果指定为<code>*</code>，则指令将会与操作系统进行交互，如果指定为 <code>&quot;</code> 则会使用上一次的寄存器。</p>
<p>例如输入 <code>&quot;*p</code> 就会把系统的剪贴板的内容粘贴到编辑器中。</p>
<h2 id="文本对象-Text-Object"><a href="#文本对象-Text-Object" class="headerlink" title="文本对象 (Text Object)">文本对象 (Text Object)</a></h2><p>Vim 的智能之处在于它知道你的内容如何进行范围的界定，通过以下命令的组合来高效的进行编辑</p>
<p><code>&#123;command&#125;[i|a]&#123;scope&#125;</code></p>
<p>command 包括 <code>y</code> <code>d</code> <code>c</code></p>
<p><code>i</code> 和 <code>a</code> 区别就是是否取边界，<code>i</code> (inner) 不包括边界，<code>a</code> (around) 包括边界。</p>
<blockquote>
<p>例如输入 <code>di(</code> 会删除当前光标处位于 <code>()</code> 内的内容，保留括号，如果使用 <code>da(</code> 则会将括号一并删去。</p>
</blockquote>
<p>scope 分别有以下</p>
<table>
<thead>
<tr>
<th>按键</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>iw</code> <code>iW</code> &#x2F; <code>aw</code> <code>aW</code></td>
<td align="left">“word” 选择单词 (<code>a</code> 包括单词前后空格)</td>
</tr>
<tr>
<td><code>is</code> &#x2F; <code>as</code></td>
<td align="left">“sentence” 选择句子</td>
</tr>
<tr>
<td><code>ip</code> &#x2F; <code>ap</code></td>
<td align="left">“paragraph” 选择段落 (<code>a</code> 包括段前后空格)</td>
</tr>
<tr>
<td><code>it</code> &#x2F; <code>at</code></td>
<td align="left">“tag” 选择标签 (指的是 xml&#x2F;html 标签)</td>
</tr>
<tr>
<td><code>i(</code> <code>i)</code> <code>ib</code> &#x2F; <code>a(</code> <code>a)</code> <code>ab</code></td>
<td align="left">“block” 选择 “()”</td>
</tr>
<tr>
<td><code>i&#123;</code> <code>i&#125;</code> <code>iB</code> &#x2F; <code>a&#123;</code> <code>a&#125;</code> <code>aB</code></td>
<td align="left">“Block” 选择 “{}”</td>
</tr>
<tr>
<td><code>i[</code> <code>i]</code> &#x2F; <code>a[</code> <code>a]</code></td>
<td align="left">选择 “[]”</td>
</tr>
<tr>
<td><code>i&lt;</code> <code>i&gt;</code> &#x2F; <code>a&lt;</code> <code>a&gt;</code></td>
<td align="left">选择 “&lt;&gt;”</td>
</tr>
<tr>
<td><code>i&#39;</code> <code>i&quot;</code> <code>i\`` / </code>a’<code> </code>a”<code> </code>a`&#96;</td>
<td align="left">选择 ‘’ “” ``</td>
</tr>
</tbody></table>
<p>举个例子，对于下面这段代码，光标位于 <code>t</code> 前时</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">3.0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hello mutoe&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span>                     ^</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>按键</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>dw</code></td>
<td align="left">删除 <code>toe</code></td>
</tr>
<tr>
<td><code>ciw</code></td>
<td align="left">删除 <code>mutoe</code> 并进入编辑模式</td>
</tr>
<tr>
<td><code>daw</code></td>
<td align="left">删除 <code> mutoe</code></td>
</tr>
<tr>
<td><code>yi&quot;</code></td>
<td align="left">复制 <code>version</code></td>
</tr>
<tr>
<td><code>da&quot;</code></td>
<td align="left">删除 <code>&quot;version&quot;</code></td>
</tr>
<tr>
<td><code>da&quot;</code></td>
<td align="left">删除 <code>&quot;version&quot;</code></td>
</tr>
<tr>
<td><code>da&#123;</code></td>
<td align="left">删除包括 <code>&#123;&#125;</code> 在内的所有内容</td>
</tr>
</tbody></table>
<h2 id="缩进"><a href="#缩进" class="headerlink" title="缩进">缩进</a></h2><table>
<thead>
<tr>
<th>按键</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>&gt;&gt;</code> &#x2F; <code>&lt;&lt;</code></td>
<td align="left">向右&#x2F;左缩进</td>
</tr>
<tr>
<td><code>2&gt;&gt;</code> &#x2F; <code>2&lt;&lt;</code></td>
<td align="left">向右&#x2F;左缩进 2 次</td>
</tr>
<tr>
<td><code>=</code></td>
<td align="left">自动缩进当前行</td>
</tr>
<tr>
<td><code>=%</code></td>
<td align="left">自动缩进当前代码块</td>
</tr>
<tr>
<td><code>gg=G</code> <code>G=gg</code></td>
<td align="left">自动缩进当前文件</td>
</tr>
</tbody></table>
<h2 id="查找"><a href="#查找" class="headerlink" title="查找">查找</a></h2><p>在 normal 模式下直接按下 <code>/</code> 或 <code>?</code>，然后输入要搜索的关键字按下回车即可。(<code>/</code>是向下查找，<code>?</code>是向上查找)</p>
<p>查找支持正则表达式，如果需要特殊字符，则需要 <code>\</code> 转义。</p>
<p>查找默认大小写敏感，可以在末尾加入 <code>\c</code> 忽略大小写</p>
<table>
<thead>
<tr>
<th>命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>/&#123;word&#125;</code></td>
<td align="left">向下查找 word</td>
</tr>
<tr>
<td><code>?&#123;word&#125;</code></td>
<td align="left">向上查找 word</td>
</tr>
<tr>
<td><code>*</code> <code>g*</code></td>
<td align="left">查找光标所在位置的单词（<code>g*</code>忽略忽略单词边界）</td>
</tr>
<tr>
<td><code>#</code> <code>g#</code></td>
<td align="left">反向查找光标所在位置的单词（<code>g#</code>忽略忽略单词边界）</td>
</tr>
<tr>
<td><code>n</code> <code>N</code></td>
<td align="left">查找下&#x2F;上一个（在<code>?</code>搜索下是相反的）</td>
</tr>
<tr>
<td><code>:nohighlight</code> <code>:nohl</code></td>
<td align="left">取消搜索高亮显示</td>
</tr>
</tbody></table>
<p>上面的查找是跨行的，如果你想要在行内进行查找，可以使用 <code>f</code> <code>F</code> <code>t</code> <code>T</code> 命令</p>
<table>
<thead>
<tr>
<th>命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>f&#123;x&#125;</code> &#x2F;<code>F&#123;x&#125;</code></td>
<td align="left">查找右&#x2F;左边的 <code>&#123;x&#125;</code> 字符</td>
</tr>
<tr>
<td><code>t&#123;x&#125;</code> &#x2F;<code>T&#123;x&#125;</code></td>
<td align="left">查找右&#x2F;左边的 <code>&#123;x&#125;</code> 字符, 光标定位在字符左边</td>
</tr>
<tr>
<td><code>;</code> <code>,</code></td>
<td align="left">查找下&#x2F;上一个（在 <code>F</code> <code>T</code> 搜索下是相反的）</td>
</tr>
</tbody></table>
<h2 id="替换"><a href="#替换" class="headerlink" title="替换">替换</a></h2><p>在命令模式下按下<kbd>:</kbd>，然后输入<code>s</code>字符进入替换模式，相关语法如下</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:&#123;scope&#125;s/&#123;regexp&#125;/&#123;result&#125;/&#123;flag&#125;</span><br></pre></td></tr></table></figure>

<p>其中<code>scope</code>为替换的作用域，<code>regexp</code>为正则表达式，<code>result</code>为要替换的结果，<code>flag</code> 为替换标志</p>
<p>例如 <code>:.,+6s/foo/bar/g</code> 的意思为，在当前行及下 6 行的范围内(<code>.,+6</code>)将所有的(<code>g</code>)<code>foo</code>替换为<code>bar</code>，</p>
<h2 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器">寄存器</a></h2><p>Vim 提供了一些存放剪贴板及宏的内存区域，我们称之为 Register，也叫做寄存器。Vim 提供了 10 类共 48 个寄存器供我们使用。</p>
<p>你可以使用 <code>&quot;aY</code> 来复制一整行到寄存器 ‘a’ 中，然后按下 <code>&quot;ap</code> 来粘贴寄存器 ‘a’ 中的内容。</p>
<p>除了 <code>a-z</code>的 26 个命名寄存器，Vim 还提供了一些特殊的寄存器</p>
<table>
<thead>
<tr>
<th>寄存器</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>&quot;&quot;</code></td>
<td>匿名寄存器. 使用 <code>d</code> <code>c</code> <code>s</code> <code>x</code> 时，被删除的寄存器会进入该寄存器内。</td>
</tr>
<tr>
<td><code>&quot;0</code></td>
<td>0 号寄存器. 保存着被拷贝来的字符串, 当使用命名寄存器拷贝时，不会被存入该寄存器</td>
</tr>
<tr>
<td><code>&quot;1</code> - <code>&quot;9</code></td>
<td>1-9 号寄存器. 保存着上次被删除的行和段落，编号为历史记录</td>
</tr>
<tr>
<td><code>&quot;-</code></td>
<td>小删除寄存器. 不足一行的删除操作会被放入该寄存器内，如 <code>dw</code> <code>cb</code> <code>dt)</code> 等指令</td>
</tr>
<tr>
<td><code>&quot;a</code> - <code>&quot;z</code></td>
<td>命名寄存器. 该寄存器只有指定时才会被写入，同时录制宏时也会保存到命名寄存器中</td>
</tr>
<tr>
<td></td>
<td>小技巧: 使用小写字母时会替换寄存器的内容，使用大写则会追加。</td>
</tr>
<tr>
<td><code>&quot;:</code></td>
<td>只读寄存器. <code>&quot;:</code> 存储了上次 command 模式下的命令，和 <code>:</code> 对应</td>
</tr>
<tr>
<td><code>&quot;.</code></td>
<td>只读寄存器. <code>&quot;.</code> 存储了上次 insert 模式中插入的字符串，和 <code>.</code> 重复上次命令是一样的</td>
</tr>
<tr>
<td><code>&quot;%</code></td>
<td>只读寄存器. 存储了当前文件的路径，是相对 vim 工作目录的路径</td>
</tr>
<tr>
<td><code>&quot;#</code></td>
<td>buffer 交替文件寄存器. 存储了当前 vim 的交替文件</td>
</tr>
<tr>
<td><code>&quot;=</code></td>
<td>表达式寄存器. 当键入 <code>&quot;=</code> 时会跳到命令行模式，此时可以输入任何 vim 表达式并保存到该寄存器中</td>
</tr>
<tr>
<td><code>&quot;*</code> <code>&quot;+</code></td>
<td>该寄存器存放了系统的剪贴板的内容. 在 X11 系统中， <code>&quot;*</code> 指鼠标拖放选中区域， <code>&quot;+</code> 指系统剪贴板</td>
</tr>
<tr>
<td><code>&quot;~</code></td>
<td>有文本拖放到 vim 中时，被拖拽的文本会存储在这里</td>
</tr>
<tr>
<td><code>&quot;_</code></td>
<td>黑洞寄存器. 所有存储到该寄存器中的内容都会消失，避免影响任何寄存器的内容</td>
</tr>
<tr>
<td><code>&quot;/</code></td>
<td>搜索模式寄存器. 存放了上一次搜索的关键词，与 <code>/</code> 对应</td>
</tr>
</tbody></table>
<p>值得一提的是，任何寄存器中的值都是可以拷贝到命令模式中的。 你可以在命令模式下直接输入 <code>&quot;ap</code>, 也可以在命令行模式下输入 <code>&lt;Ctrl-r&gt;a</code> 来执行。</p>
<p>另外，如果你想修改某寄存器的内容（比如你录制了一段很长的宏，其中有一个错误的单词或者步骤），你可以使用 vim 变量操作来修改寄存器的内容。
比如你想修改寄存器 a 的内容，你可以使用 <code>:let @a = &quot;new content&quot;</code> 来修改。
结合上面的命令，修改时你还可以粘贴当前寄存器的内容，只需在 command line 模式下按下 <code>&lt;Ctrl-r&gt;a</code> 即可。</p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域">作用域</a></h3><ul>
<li><code>.</code>(或留空) 当前行</li>
<li><code>%</code> 全文</li>
<li><code>,</code>范围</li>
<li><code>1,$</code> 第 1 行到最后一行</li>
<li><code>.,+2</code> 当前行与接下来 2 行</li>
<li><code>&#39;&lt;,&#39;&gt;</code> 选区范围 （在 visual 模式下输入<code>:</code>会直接补全）</li>
</ul>
<h3 id="替换标志"><a href="#替换标志" class="headerlink" title="替换标志">替换标志</a></h3><p>替换标志可以叠加使用</p>
<ul>
<li><code>(留空)</code> 只替换一次</li>
<li><code>g</code> 全局替换</li>
<li><code>i</code> 忽略大小写</li>
<li><code>c</code> 替换前确认</li>
</ul>
<p>进行替换确认时，<code>y</code> <code>n</code> 表示替换&#x2F;不替换当前位置，<code>a</code> <code>q</code> 表示替换&#x2F;不替换所有，<code>l</code> 表示替换当前位置并退出</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他">其他</a></h2><table>
<thead>
<tr>
<th>按键</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>~</code></td>
<td align="left">将光标位置的字母大小写互换</td>
</tr>
<tr>
<td><code>g~~</code></td>
<td align="left">将当前行所有字母变为大小写互换</td>
</tr>
<tr>
<td><code>guw</code> &#x2F; <code>gUw</code></td>
<td align="left">将光标位置的单词变为小&#x2F;大写</td>
</tr>
<tr>
<td><code>guu</code> &#x2F; <code>gUU</code></td>
<td align="left">将当前行所有字母变为大写</td>
</tr>
<tr>
<td><code>ga</code> &#x2F; <code>g8</code></td>
<td align="left">查看光标位置字符的 <code>ascii</code> &#x2F; <code>utf-8</code> 码</td>
</tr>
<tr>
<td><code>J</code></td>
<td align="left">合并下一行</td>
</tr>
<tr>
<td><code>Ctrl-a</code> <code>Ctrl-x</code></td>
<td align="left">将光标位置的数字自增&#x2F;减 (可配合数字使用)</td>
</tr>
</tbody></table>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置">配置</a></h1><p>关于配置，可以进入命令模式输入 <code>set</code> 来临时设置配置，也可以配置在 <code>.vimrc</code> 永久生效</p>
<table>
<thead>
<tr>
<th>配置名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>clipboard=unnamed</code></td>
<td align="left">设置对接系统剪贴板</td>
</tr>
<tr>
<td><code>ignorecase</code></td>
<td align="left">设置默认进行大小写不敏感查找</td>
</tr>
<tr>
<td><code>smartcase</code></td>
<td align="left">如果有一个大写字母，则切换到大小写敏感查找</td>
</tr>
<tr>
<td><code>incsearch</code></td>
<td align="left">敲键的同时搜索，按下回车把移动光标移动到匹配的词； 按下 Esc 取消搜索。</td>
</tr>
<tr>
<td><code>number</code> <code>nu</code></td>
<td align="left">显示行数</td>
</tr>
<tr>
<td><code>relativenumber</code> <code>rnu</code></td>
<td align="left">显示相对行数</td>
</tr>
<tr>
<td><code>scrolloff=5</code> <code>so=5</code></td>
<td align="left">设置滚动屏幕时上下保留的行数</td>
</tr>
<tr>
<td><code>wrapscan</code></td>
<td align="left">设置到文件尾部后是否重新从文件头开始搜索</td>
</tr>
</tbody></table>
<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips">Tips</a></h1><ol>
<li>将某处内容替换可以进入选区选中要替换的内容后直接按 <code>p</code> 进行替换</li>
<li>可以使用 <code>CTRL-[</code> 代替 <kbd>ESC</kbd>，不仅是在不方便使用 Esc 时可用，更多的在于方便按</li>
<li>想要跳转到当前软行首使用 <code>0w</code> 会比 <code>^</code> 快</li>
</ol>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料">参考资料</a></h1><ul>
<li><a target="_blank" rel="noopener" href="https://vim.fandom.com/wiki/Vim_Tips_Wiki">Vim Tips Wiki</a></li>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-vim.html">Linux vim - Runoob</a></li>
<li><a target="_blank" rel="noopener" href="https://harttle.land/tags.html#Vim">Vim - Harttle Land</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/linux/l-cn-tip-vim/">技巧：快速提高 Vi&#x2F;Vim 使用效率的原则与途径 - 方吾松</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@schtoeffel/you-don-t-need-more-than-one-cursor-in-vim-2c44117d51db">You don’t need more than one cursor in vim - @schoteffel</a></li>
<li><a target="_blank" rel="noopener" href="http://einverne.github.io/post/2017/10/vim-global.html">Vim 全局命令 g - Ein Verne’s Blog</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.carbonfive.com/vim-text-objects-the-definitive-guide/">Vim Text Objects: The Definitive Guide - Carbon Five’s Blog</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/unix-linux-vim-go-back-to-last-cursor-position/">Vim: Jump Back To Previous or Last Cursor Position - nixCraft</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ce1b1e95fa84">Vim 批量插入数字序列</a></li>
<li><a target="_blank" rel="noopener" href="https://coolshell.cn/articles/11312.html">无插件 Vim 编程技巧 - 陈浩</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/27249253">vim&#x2F;gvim 有哪些实用技巧？ - 知乎</a> （感谢所有回答者）</li>
</ul>
<!--
TODO:
tag
jumplist
quickfix
宏
-->

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Vim/" rel="tag"><i class="fa fa-tag"></i> Vim</a>
              <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2017/chrome-uses-tips/" rel="prev" title="Chrome 浏览器的一些使用小技巧">
                  <i class="fa fa-angle-left"></i> Chrome 浏览器的一些使用小技巧
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2017/linux-study-notes/" rel="next" title="Linux 学习笔记">
                  Linux 学习笔记 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2015 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">mutoe</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div><div class="external-link">
  <!--  <a href="/sponsor">拥抱开源</a>-->
  <a target="_blank" rel="noopener" href="https://lintao-index.pages.dev/docs/intro">Lintao's Blog</a>
  <a href="/quick">学习资料导航</a>
  <a href="/npm">常用 npm 包</a>
  <a href="/cheatsheet/good-hash-table-primes">哈希函数质数速查表</a>
</div>

<script>
  function setUtteranceToDark(dark) {
    const message = {
      type: 'set-theme',
      theme: dark ? 'github-dark-orange' : 'github-light',
    };
    const utterances = document.querySelector('iframe.utterances-frame').contentWindow; // try event.source instead
    utterances.postMessage(message, 'https://utteranc.es');
  }

  const darkThemeMq = window.matchMedia('(prefers-color-scheme: dark)');
  darkThemeMq.addEventListener('change', e => setUtteranceToDark(e.matches));

  // dynamic change utterance theme
  addEventListener('message', event => {
    if (event.origin !== 'https://utteranc.es') return;
    setUtteranceToDark(darkThemeMq.matches)
  });
</script>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/mutoe" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"mutoe/blog","issue_term":"title","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
