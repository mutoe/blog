---
title: åŠ¨æ€è§„åˆ’ï¼šä»å…¥é—¨åˆ°æ”¾å¼ƒ
date: 2019-02-25 21:57:14
categories: å¿ƒå¾—
tags:
  - Dynamic Programming

mathjax: true
---

# ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’

åŠ¨æ€è§„åˆ’ï¼ˆDP, Dynamic Programmingï¼‰

ä¸€å¥è¯æ€»ç»“ï¼š**åœ¨æ±‚è§£ä¸€ä¸ªå¤æ‚é—®é¢˜æ—¶ï¼Œå°†å…¶åˆ†è§£ä¸ºè‹¥å¹²ä¸ªç®€å•é—®é¢˜ã€‚é€šè¿‡æ±‚è§£ç®€å•é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œæ¥æ‰¾åˆ°ç›®æ ‡é—®é¢˜çš„æœ€ä¼˜è§£ã€‚**

# åŠ¨æ€è§„åˆ’èƒ½åšä»€ä¹ˆ

å¸¸è§é—®é¢˜
- æ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬ N é¡¹ ([Leetcode 509. Fibonacci Number](https://leetcode.com/problems/fibonacci-number/))
- èƒŒåŒ…é—®é¢˜
- é˜¶æ¢¯é—®é¢˜ ([Leetcode 70. Climbing Stairs](https://leetcode.com/problems/climbing-stairs/))
- ç¡¬å¸é—®é¢˜ ([Leetcode 322. Coin Change](https://leetcode.com/problems/coin-change/))

# æ€ä¹ˆæ±‚è§£åŠ¨æ€è§„åˆ’é—®é¢˜

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥äº†è§£ä¸€ä¸‹DPçš„åŸºæœ¬åŸç†ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°æŸä¸ªçŠ¶æ€çš„æœ€ä¼˜è§£ï¼Œç„¶ååœ¨å®ƒçš„å¸®åŠ©ä¸‹ï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€çš„æœ€ä¼˜è§£ã€‚

å¦‚ç¡¬å¸é—®é¢˜çš„ä¾‹å­

> *ç¡¬å¸é—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬æœ‰é¢å€¼ä¸º1å…ƒã€3å…ƒå’Œ5å…ƒçš„ç¡¬å¸è‹¥å¹²æšï¼Œå¦‚ä½•ç”¨æœ€å°‘çš„ç¡¬å¸å‡‘å¤Ÿ11å…ƒï¼Ÿ*

<!-- more -->

é¦–å…ˆæˆ‘ä»¬å°†è¯¥é—®é¢˜åˆ†è§£ä¸º

1. å¦‚ä½•ç”¨æœ€å°‘çš„ç¡¬å¸å‡‘å¤Ÿ0å…ƒ?
2. å¦‚ä½•ç”¨æœ€å°‘çš„ç¡¬å¸å‡‘å¤Ÿ1å…ƒ?
3. å¦‚ä½•ç”¨æœ€å°‘çš„ç¡¬å¸å‡‘å¤Ÿ2å…ƒ?
4. ...
5. å¦‚ä½•ç”¨æœ€å°‘çš„ç¡¬å¸å‡‘å¤Ÿ11å…ƒ?

## â€œçŠ¶æ€â€æ˜¯ä»€ä¹ˆ

â€œçŠ¶æ€â€ç”¨æ¥æè¿°è¯¥é—®é¢˜çš„å­é—®é¢˜çš„è§£ã€‚

æ˜¾ç„¶ï¼Œç¬¬1ä¸ªé—®é¢˜ç¬¬è§£æ˜¯0ï¼Œæˆ‘ä»¬åªéœ€è¦0ä¸ªç¡¬å¸å°±èƒ½å‡‘å¤Ÿ0å…ƒã€‚

**æˆ‘ä»¬ç”¨ $d(i)=j$ æ¥è¡¨ç¤ºå‡‘å¤Ÿ $i$ å…ƒè‡³å°‘éœ€è¦ $j$ ä¸ªç¡¬å¸**

ç¬¬1ä¸ªé—®é¢˜å³

$$d(0)=0$$

æˆ‘ä»¬åœ¨è§£å†³ç¬¬2ä¸ªé—®é¢˜æ—¶ï¼ˆå¦‚ä½•ç”¨æœ€å°‘çš„ç¡¬å¸å‡‘å¤Ÿ1å…ƒ?ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆç¬¬1ä¸ªé—®é¢˜ç¬¬æœ€ä¼˜è§£ï¼Œæ¥è§£å‡ºç¬¬2ä¸ªé—®é¢˜ã€‚

å‡‘å‡º1å…ƒæ—¶ï¼Œæˆ‘ä»¬å¯é€‰çš„ç¡¬å¸åªæœ‰1å…ƒç¡¬å¸ï¼Œæˆ‘ä»¬åªéœ€æŒ‘é€‰1ä¸ª1å…ƒç¡¬å¸ï¼Œç»“åˆç¬¬1ä¸ªé—®é¢˜ç¬¬æœ€ä¼˜è§£å³å¯æ±‚å‡ºç¬¬2ä¸ªé—®é¢˜ï¼Œå³

$$d(1)=d(1-1)+1=d(0)+1=0+1=1$$

åŒç†ï¼Œå‡‘å‡º2å…ƒæ—¶ï¼Œæˆ‘ä»¬ä»ç„¶åªæœ‰1å…ƒç¡¬å¸å¯ç”¨ï¼Œäºæ˜¯å†æŒ‘é€‰1ä¸ª1å…ƒç¡¬å¸ï¼Œç»“åˆç¬¬äºŒä¸ªé—®é¢˜ç¬¬æœ€ä¼˜è§£æ¥æ±‚å‡ºç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œå³

$$d(2)=d(2-1)+1=d(1)+1=1+1=2$$

å‡‘å‡º3å…ƒæ—¶ï¼Œæˆ‘ä»¬å¤šäº†ä¸€ç§3å…ƒç¡¬å¸å¯é€‰ï¼Œäºæ˜¯æˆ‘ä»¬å°±æœ‰2ç§æ–¹æ¡ˆå¯é€‰ï¼š

1. æ‹¿èµ·1å…ƒç¡¬å¸

  å¦‚æœæˆ‘ä»¬æ‹¿èµ·1å…ƒç¡¬å¸ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±å˜æˆäº†ï¼šå‡‘å¤Ÿ3-1å…ƒéœ€è¦çš„æœ€å°‘ç¡¬å¸æ•°é‡ï¼Œå³
  
  $$d(3)=d(3-1)+1=d(2)+1=2+1=3$$

2. æ‹¿èµ·3å…ƒç¡¬å¸

  å¦‚æœæˆ‘ä»¬æ‹¿èµ·3å…ƒç¡¬å¸ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±å˜æˆï¼šå‡‘å¤Ÿ3-3=0å…ƒéœ€è¦çš„æœ€å°‘ç¡¬å¸æ•°é‡ï¼Œå³
  
  $$d(3)=d(3-3)+1=d(0)+1=0+1=1$$

æ‰€ä»¥æˆ‘ä»¬å¾—åˆ°

$$d(3)=\min\\{d(3-1)+1, d(3-3)+1\\}$$

----

ä»ä¸Šé¢çš„æ¼”ç®—ä¸­ï¼Œæˆ‘ä»¬æŠ½å‡ºä¸¤ä¸ªæ¦‚å¿µï¼š**çŠ¶æ€** å’Œ **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ã€‚

ä¸Šæ–‡ä¸­ $d(i)$ è¡¨ç¤ºå‡‘å¤Ÿ $i$ å…ƒéœ€è¦çš„æœ€å°‘ç¡¬å¸æ•°é‡ï¼Œæˆ‘ä»¬å®šä¹‰ä¸ºè¯¥é—®é¢˜çš„â€œçŠ¶æ€â€ã€‚

æˆ‘ä»¬æœ€ç»ˆè¦æ±‚è§£çš„é—®é¢˜å¯ä»¥ç”¨è¿™ä¸ªçŠ¶æ€æ¥è¡¨ç¤ºï¼š $d(3)$ å³å‡‘å¤Ÿ3å…ƒæœ€å°‘éœ€è¦å¤šå°‘ç¡¬å¸ã€‚

çŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±æ˜¯

$$d(3)=\min\\{d(3-1)+1, d(3-3)+1\\}$$

å®ƒæè¿°äº†çŠ¶æ€ä¹‹é—´æ—¶å¦‚ä½•è½¬ç§»çš„ï¼Œæˆ‘ä»¬å¯¹å®ƒæŠ½è±¡åŒ–

$$d(i)=\min\\{d(i-v_j)+1\\}$$

å…¶ä¸­ $i-v_j \geq 0$, $v_j$ è¡¨ç¤ºç¬¬ $j$ ä¸ªç¡¬å¸çš„é¢å€¼

----

æœ‰äº†çŠ¶æ€å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œè¿™ä¸ªé—®é¢˜åŸºæœ¬ä¸Šå°±è§£å†³äº†

ä¸‹é¢æ˜¯å½“ i ä» 0 åˆ° 11 æ—¶åˆ°è§£

| $i$ | $j$ | $v_j$ ($\min\\{d(i-v_j)\\}$) |
| --- | --- | ------ |
| 0   | 0   | -                          |
| 1   | 1   | 1 (0)                      |
| 2   | 2   | 1 (1)                      |
| 3   | 1   | 3 (0)                      |
| 4   | 2   | 1 (3)                      |
| 5   | 1   | 5 (0)                      |
| 6   | 2   | 3 (3)                      |
| 7   | 3   | 1 (6)                      |
| 8   | 2   | 3 (5)                      |
| 9   | 3   | 1 (8)                      |
| 10  | 2   | 5 (5)                      |
| 11  | 3   | 1 (10)                     |

å¯ä»¥å¾—åˆ°ï¼Œè¦å‡‘å¤Ÿ11å…ƒè‡³å°‘éœ€è¦3æšç¡¬å¸

$$ d(11)=d(10)+1=d(5)+1+1=d(0)+1+1+1=3 $$

BB è¿™ä¹ˆå¤šæ²¡ç”¨ï¼Œ Show your code !

# ä»£ç å®ç°

> Leetcode 322. Coin Change

## Golang

### main

``` go
// CoinChange: coins ç¡¬å¸, amount æœŸæœ›çš„é‡‘é¢, è¿”å›æœ€å°‘éœ€è¦çš„ç¡¬å¸æ•°é‡ï¼Œå¦‚æœä¸å¯è§£è¿”å›-1
func CoinChange(coins []int, amount int) int {
  dp := make([]int, amount+1)
  dp[0] = 0

  for i := 1; i <= amount; i++ {
    dp[i] = amount + 1
    for _, coin := range coins {
      if coin <= i && dp[i-coin] != -1 && dp[i-coin]+1 < dp[i] {
        dp[i] = dp[i-coin] + 1
      }
    }
    if dp[i] > amount {
      dp[i] = -1
    }
  }

  return dp[amount]
}
```

### unit test

``` go
import "testing"

func TestCoinCharge(t *testing.T) {
  type args struct {
    coins  []int
    amount int
  }
  tests := []struct {
    name string
    args args
    want int
  }{
    {"[2] => 3", args{[]int{2}, 3}, -1},
    {"[2] => 4", args{[]int{2}, 4}, 2},
    {"[1,2,5] => 11", args{[]int{1, 2, 5}, 11}, 3},
    {"[1,3,5] => 11", args{[]int{1, 3, 5}, 11}, 3},
  }
  for _, tt := range tests {
    t.Run(tt.name, func(t *testing.T) {
      if got := CoinCharge(tt.args.coins, tt.args.amount); got != tt.want {
        t.Errorf("CoinCharge() = %v, want %v", got, tt.want)
      }
    })
  }
}

```

### Leetcode result

    Runtime: 8 ms, faster than 99.26% of Go online submissions for Coin Change.

# åˆçº§ DP é—®é¢˜

ä¸Šé¢çš„å†…å®¹å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ DP é—®é¢˜ï¼šLISï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªé—®é¢˜æ¥æ‰¾åˆ°è¿™ä¸ªé—®é¢˜çš„çŠ¶æ€å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚

> [Leetcode 300. Longest Increasing Subsequence](https://leetcode.com/problems/longest-increasing-subsequence/)  
> *LIS: æœ‰ä¸€ä¸ªåºåˆ—æœ‰ N ä¸ªæ•°ï¼ŒA[1],A[2],...,A[N]. æ±‚å‡ºå…¶æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚*

æˆ‘ä»¬å°†è¿™ä¸ªé—®é¢˜åˆ†è§£ï¼Œä¸€ä¸ªåºåˆ—æœ‰ $i$ ä¸ªæ•° A[1],A[2],...,A[i], å…¶ä¸­ $i \lt N$. 

é‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±å˜æˆäº†ä¸€ä¸ªå­é—®é¢˜ï¼Œç„¶åæˆ‘ä»¬å®šä¹‰ $d(i)$, è¡¨ç¤ºå‰ $i$ ä¸ªæ•°ä¸­ä»¥ $A[i]$ ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚

å½“ $i\to N$ æ—¶ï¼Œæˆ‘ä»¬æŠŠ $d(1)$ åˆ° $d(N)$ éƒ½è®¡ç®—å‡ºæ¥ï¼Œæˆ‘ä»¬è¦æ‰¾çš„ç­”æ¡ˆå°±æ˜¯è¿™é‡Œé¢æœ€å¤§çš„ä¸€ä¸ªã€‚

çŠ¶æ€æ‰¾åˆ°äº†ï¼Œä¸‹ä¸€æ­¥æ¥æ‰¾çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¦æ±‚çš„è¿™ N ä¸ªæ•°çš„åºåˆ—æ˜¯ï¼š

    5, 3, 4, 8, 6, 7
    
æ ¹æ®ä¸Šé¢çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¾—åˆ°

$d(1)=1$ (5) // 5å‰é¢æ²¡æœ‰æ¯”å®ƒå°çš„ $d(1)=1$

$d(2)=1$ (3) // 3å‰é¢æ²¡æœ‰æ¯”å®ƒå°çš„ $d(2)=1$

$d(3)=2$ (3 4) // 4å‰é¢æœ‰1ä¸ªæ¯”å®ƒå°çš„ï¼Œæ‰€ä»¥ $d(3)=d(2)+1=2$

$d(4)=3$ (3 4 8) // 8å‰é¢æ¯”ä»–å°çš„æœ‰3ä¸ªæ•°, æ‰€ä»¥ $d(4)=\max\\{d(1), d(2), d(3)\\}+1=3$

$d(5)=3$ (3 4 6) // 6å‰é¢æ¯”ä»–å°çš„æœ‰3ä¸ªæ•°ï¼Œæ‰€ä»¥ $d(5)=\max\\{d(1), d(2), d(3)\\}+1=3$

$d(6)=4$ (3 4 6 7) // 7å‰é¢æ¯”ä»–å°çš„æœ‰4ä¸ªæ•°ï¼Œæ‰€ä»¥ $d(6)=\max\\{d(1), d(2), d(4), d(5)\\}+1=4$

----

æ ¹æ® $d(i)$ å’Œ $d(i-1)$ æˆ‘ä»¬å¯ä»¥å¾—åˆ°

$$ d(i)= \max\\{1, d(j)+1\\} (j \lt i, A[j] \lt A[i]) $$

è§£é‡Šä¸€ä¸‹ï¼Œè¦æ‰¾åˆ° $d(i)$, æˆ‘ä»¬è¦å…ˆæ‰¾åˆ°æ‰€æœ‰ $A[j]$ å°äº $A[i]$ çš„æ•°ï¼Œåˆ†åˆ«æ˜¯ $1 \to j$ï¼Œå¹¶ä¸”ï¼Œ
ç„¶åæ‰¾åˆ°ä»–ä»¬ä¸­æœ€å¤§çš„é‚£ä¸€ä¸ª $d(j)$, åŠ ä¸Š1, å°±å¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„åºåˆ— $1 \to i$ çš„LISé•¿åº¦ $d(i)$ äº†ã€‚

## Golang å®ç°

> [Leetcode 300. Longest Increasing Subsequence](https://leetcode.com/problems/longest-increasing-subsequence/)  

### main $O(n^2)$

``` go
func lengthOfLIS(nums []int) int {
  dp := make([]int, len(nums))
  maxLen := 0

  for i, num := range nums {
    dp[i] = 1
    for j := 0; j < i; j++ {
      if nums[j] < num && dp[j]+1 > dp[i] {
        dp[i] = dp[j] + 1
      }
    }
    if dp[i] > maxLen {
      maxLen = dp[i]
    }
  }

  return maxLen
}
```

### unit test

``` go
import "testing"

func Test_lengthOfLIS(t *testing.T) {
  type args struct {
    nums []int
  }
  tests := []struct {
    name string
    args args
    want int
  }{
    {"4", args{[]int{10, 9, 2, 5, 3, 7, 101, 18}}, 4},
    {"4", args{[]int{10, 9, 2, 2, 5, 3, 7, 101, 18}}, 4},
    {"6", args{[]int{1, 3, 6, 7, 9, 4, 10, 5, 6}}, 6},
  }
  for _, tt := range tests {
    t.Run(tt.name, func(t *testing.T) {
      if got := lengthOfLIS(tt.args.nums); got != tt.want {
        t.Errorf("lengthOfLIS() = %v, want %v", got, tt.want)
      }
    })
  }
}
```

### Leetcode result

    Runtime: 8 ms, faster than 69.34% of Go online submissions for Longest Increasing Subsequence.
    Memory Usage: 2.3 MB, less than 95.45% of Go online submissions for Longest Increasing Subsequence.

çœ‹ç­”æ¡ˆæ˜¯æœ‰æ›´å¿«çš„ç®—æ³•çš„ï¼ˆ0ms $O(n \log n)$ï¼‰ï¼Œä½†å¹¶ä¸æ˜¯ä½¿ç”¨çš„åŠ¨æ€è§„åˆ’æ¥è§£å†³,

# ä¸­çº§ DP é—®é¢˜

æ¥ä¸‹æ¥æ¥çœ‹çœ‹å¦‚ä½•è§£å†³äºŒç»´çš„ DP é—®é¢˜ã€‚

> ä¸€ä¸ªå¹³é¢ä¸Šæœ‰ M*N ä¸ªæ ¼å­ï¼Œæ¯ä¸ªæ ¼å­ä¸­éƒ½æ”¾æœ‰ä¸€å®šé‡çš„è‹¹æœğŸã€‚
  ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œæ¯ä¸€æ­¥åªèƒ½å¾€ä¸‹æˆ–è€…å¾€å³èµ°ï¼Œæ¯èµ°åˆ°ä¸€ä¸ªæ ¼å­ä¸Šå°±æŠŠæ ¼å­é‡Œçš„è‹¹æœæ”¶é›†èµ·æ¥ï¼Œ
  è¿™æ ·ä¸‹å»ï¼Œä½ æœ€å¤šèƒ½æ”¶é›†å¤šå°‘ä¸ªè‹¹æœï¼Ÿ

è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯ä¸€æ ·çš„æ€è·¯ï¼Œç¬¬ä¸€æ­¥æ‰¾åˆ°é—®é¢˜çš„â€œçŠ¶æ€â€ï¼Œç¬¬äºŒéƒ¨æ‰¾åˆ°â€œçŠ¶æ€è½¬ç§»æ–¹ç¨‹â€ã€‚

æˆ‘ä»¬ç”¨ $S[i][j]$ è¡¨ç¤ºæˆ‘ä»¬èµ°åˆ° $(i, j)$ è¿™ä¸ªæ ¼å­æ—¶æˆ‘ä»¬æœ€å¤šèƒ½æ‹¿åˆ°å¤šå°‘è‹¹æœï¼Œ $S[i][j]$ å°±æ˜¯æˆ‘ä»¬çš„â€œçŠ¶æ€â€

æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œè¦åˆ°è¾¾ä¸€ä¸ªæ ¼å­ï¼Œæˆ‘ä»¬åªæœ‰ä¸¤ç§æ–¹æ³•ï¼šä»ä¸Šé¢æ¥æˆ–ä»å·¦è¾¹æ¥ã€‚
é‚£ä¹ˆåªè¦æˆ‘ä»¬æ‰¾åˆ°ä»ä¸Šé¢æˆ–è€…å·¦è¾¹æ¥çš„é‚£ä¸€ä¸ªæœ€å¤šæ‹¿åˆ°å¤šå°‘è‹¹æœï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“å½“å‰æ ¼å­æœ€å¤šèƒ½æ‹¿åˆ°å¤šå°‘è‹¹æœï¼Œ
è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†çŠ¶æ€è½¬ç§»æ–¹ç¨‹

$$ S[i][j] = A[i][j] + \max\\{S[i-1][j], S[i][j-1]\\} $$

å…¶ä¸­ $i$ ä»£è¡¨è¡Œï¼Œ $j$ ä»£è¡¨åˆ—ï¼Œä¸‹æ ‡å‡ä» 0 å¼€å§‹ï¼Œ$A[i][j]$ ä»£è¡¨ $(i, j)$ å¤„çš„è‹¹æœæ•°ã€‚

----

ä¾‹å¦‚æˆ‘ä»¬ä»¥ $\begin{bmatrix} [1&2&3], \\\\ [4&5&6], \\\\ [7&8&9], \end{bmatrix}$ ä¸ºä¾‹

æˆ‘ä»¬åœ¨æ±‚ $S[1][1]$ æ—¶ï¼Œéœ€è¦å…ˆæ±‚å‡º $S[0][1]$ å’Œ $S[1][]0$ï¼Œç„¶åæ¯”è¾ƒä»–ä»¬å–å¤§ï¼Œç„¶ååŠ ä¸Š $A[1][1]$ ä¸Šçš„æ•°å³å¯ï¼Œå³

$$ S[1][1] = A[1][1] + \max\\{S[1][0], S[0][1]\\} $$

åˆ

$$ S[1][0] = A[1][0] + S[0][0] = 4 + 1 = 5 $$
$$ S[0][1] = A[0][1] + S[0][0] = 2 + 1 = 3 $$

æ‰€ä»¥

$$ S[1][1] = A[1][1] + S[1][0] = 5 + 5 = 10 $$

## Golang å®ç°

> Leetcode 64. Minimum Path Sum

è¯¥é¢˜ä¸ç¤ºä¾‹é¢˜ç›®ç›¸åï¼Œæ±‚çš„æ—¶è·¯å¾„ä¸Šçš„æœ€å°å€¼

### main

``` go
package main

func min(x, y int) int {
  if x > y {
    return y
  }
  return x
}

func minPathSum(grid [][]int) int {
  row := len(grid)
  col := len(grid[0])
  for i := 0; i < row; i++ {
    for j := 0; j < col; j++ {
      if i == 0 && j == 0 {
        continue
      } else if i == 0 {
        grid[i][j] += grid[i][j-1]
      } else if j == 0 {
        grid[i][j] += grid[i-1][j]
      } else {
        grid[i][j] += min(grid[i-1][j], grid[i][j-1])
      }
    }
  }
  return grid[row-1][col-1]
}
```

### unit test

``` go
import "testing"

func Test_minPathSum(t *testing.T) {
  type args struct {
    grid [][]int
  }
  tests := []struct {
    name string
    args args
    want int
  }{
    {"7", args{[][]int{
      {1, 3, 1},
      {1, 5, 1},
      {4, 2, 1},
    }}, 7},
  }
  for _, tt := range tests {
    t.Run(tt.name, func(t *testing.T) {
      if got := minPathSum(tt.args.grid); got != tt.want {
        t.Errorf("minPathSum() = %v, want %v", got, tt.want)
      }
    })
  }
}
```

### Leetcode result

    Runtime: 8 ms, faster than 100.00% of Go online submissions for Minimum Path Sum.
    Memory Usage: 3.9 MB, less than 95.45% of Go online submissions for Minimum Path Sum.

éå¸¸é«˜æ•ˆçš„ç®—æ³•ï¼Œæ—¶é—´ $O(m*n)$, ç©ºé—´ $O(1)$ï¼Œç©ºé—´ä¸Šåˆ©ç”¨äº†ç»™å®šçš„æ•°ç»„ï¼Œè¿›è¡Œç´¯åŠ ã€‚
å¦‚æœä¸èƒ½ä¿®æ”¹åŸæ•°ç»„çš„è¯æ–°å»ºä¸€ä¸ªç­‰é•¿çš„äºŒç»´æ•°ç»„å³å¯ã€‚

# ä¸­é«˜çº§ DP é—®é¢˜

æ¥ä¸‹æ¥è¯´éå¸¸ç»å…¸çš„èƒŒåŒ…é—®é¢˜

> èƒŒåŒ…é—®é¢˜ï¼šç»™å®šä¸€ç»„ç‰©å“ï¼Œæ¯ç§ç‰©å“éƒ½æœ‰è‡ªå·±çš„é‡é‡å’Œä»·æ ¼ï¼Œåœ¨é™å®šçš„æ€»é‡é‡å†…ï¼Œæˆ‘ä»¬å¦‚ä½•é€‰æ‹©ï¼Œæ‰èƒ½ä½¿å¾—ç‰©å“çš„æ€»ä»·æ ¼æœ€é«˜ã€‚

æˆ‘ä»¬æœ‰ $n$ ç§ç‰©å“ï¼Œç‰©å“ $j$ çš„é‡é‡ä¸º $w_j$ï¼Œä»·æ ¼ä¸º $p_j$ï¼Œæˆ‘ä»¬è®¤ä¸ºæ‰€æœ‰ç‰©å“çš„é‡é‡å’Œä»·æ ¼éƒ½æ˜¯éè´Ÿçš„ã€‚
èƒŒåŒ…æ‰€èƒ½æ‰¿å—çš„æœ€å¤§é‡é‡ä¸º $W$ã€‚

- å¦‚æœé™å®šæ¯ç§ç‰©å“åªèƒ½é€‰æ‹© 0 ä¸ªæˆ–è€… 1 ä¸ªï¼Œåˆ™é—®é¢˜ç§°ä¸º **0-1èƒŒåŒ…é—®é¢˜**ï¼Œå¯è¡¨ç¤ºä¸º 
  $\text{æœ€å¤§åŒ–:} \sum_{j=1}^n p_j x_j$
  $\text{å—é™äº:} \sum_{j=1}^n w_j x_j \leq W, x_j \in \\{0, 1\\}$
  
- å¦‚æœé™å®šç‰©å“ $j$ æœ€å¤šåªèƒ½é€‰æ‹© $b_j$ ä¸ªï¼Œåˆ™é—®é¢˜ç§°ä¸º**æœ‰ç•ŒèƒŒåŒ…é—®é¢˜**ï¼Œå¯è¡¨ç¤ºä¸º
  $æœ€å¤§åŒ–: \sum_{j=1}^n p_j x_j$
  $å—é™äº: \sum_{j=1}^n w_j x_j \leq W, x_j \in \\{0, 1, ..., b_j\\}$
  
- å¦‚æœä¸é™å®šæ¯ç§ç‰©å“çš„æ•°é‡ï¼Œåˆ™é—®é¢˜ç§°ä¸º**æ— ç•ŒèƒŒåŒ…é—®é¢˜**

å„ç±»å¤æ‚çš„èƒŒåŒ…é—®é¢˜éƒ½å¯ä»¥å˜æ¢ä¸ºç®€å•çš„0-1èƒŒåŒ…é—®é¢˜è¿›è¡Œæ±‚è§£

----

å‡è®¾æˆ‘ä»¬æœ‰ 5 ä»¶ç‰©å“ï¼Œä»–ä»¬çš„ `[é‡é‡, ä»·å€¼]` åˆ†åˆ«ä¸º `[5, 12], [4, 3], [7, 10], [2, 3], [6, 6]`ï¼Œæ±‚å‡ºèƒŒåŒ…å®¹é‡ä¸º 13 æ—¶çš„æœ€ä¼˜è§£.

é¦–å…ˆæˆ‘ä»¬å®šä¹‰çŠ¶æ€ $d(i, j)$ è¡¨ç¤ºå‰ $i$ ä¸ªç‰©å“è£…å…¥å‰©ä½™ä½“ç§¯ä¸º j çš„èƒŒåŒ…é‡Œèƒ½è¾¾åˆ°çš„æœ€å¤§ä»·å€¼.  
èƒŒåŒ…çš„æ€»å®¹é‡ä¸º $W$, ç‰©å“çš„æ€»æ•°é‡ä¸º $N$ ç¬¬ $i$ ä¸ªç‰©å“çš„é‡é‡ä¸º $W_i$, ä»·å€¼ä¸º $V_i$ï¼ˆæ³¨æ„ç´¢å¼• $i$ æ˜¯ä» $0$ å¼€å§‹çš„ï¼‰

æˆ‘ä»¬æŠŠé—®é¢˜æ‹†è§£æˆ

1. 5 ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…å®¹é‡ä¸º 0 çš„æœ€ä¼˜è§£
2. 5 ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…å®¹é‡ä¸º 1 çš„æœ€ä¼˜è§£
3. 5 ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…å®¹é‡ä¸º 2 çš„æœ€ä¼˜è§£
4. ...
5. 5 ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…å®¹é‡ä¸º 13 çš„æœ€ä¼˜è§£

- æƒ…å†µ `1.` æ˜¾ç„¶ï¼ŒèƒŒåŒ…å®¹é‡ä¸º 0 æ—¶æ²¡æœ‰ä¸œè¥¿èƒ½æ”¾å…¥ï¼Œå³ $d(5, 0) = 0$ï¼Œä»¥æ­¤ç±»æ¨ $d(i, 0) = 0, i \in \\{0, 1, ..., N \\}$
- æƒ…å†µ `2.` èƒŒåŒ…å®¹é‡ä¸º 1 æ—¶ä¹Ÿæ²¡æœ‰ä¸œè¥¿èƒ½æ”¾å…¥ï¼Œå› ä¸º $W_i < j = 1, i \in \\{0,4\\}$ ä¹Ÿä¸å­˜åœ¨
- å½“ $j=2$ æ—¶ï¼Œå­˜åœ¨ $W_i < j = 2$ï¼Œæ­¤æ—¶ $i-1=2$ï¼Œä¸º `[2, 3]` è¿™ä¸ªç‰©å“ï¼Œå³ $d(5, 2) = V_3 = 3$
- å½“ $j=3$ æ—¶ï¼ŒåŒä¸Šï¼Œ $d(5, 3) = d(5, 2) = 3$
- å½“ $j=4$ æ—¶ï¼Œæƒ…å†µç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¬¡æ‹†è§£è¿™ä¸ªå­é—®é¢˜
  
  1. å‰ 0 ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…å®¹é‡ä¸º 4 çš„æœ€ä¼˜è§£
  1. å‰ 1 ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…å®¹é‡ä¸º 4 çš„æœ€ä¼˜è§£
  2. ...
  3. å‰ 5 ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…å®¹é‡ä¸º 4 çš„æœ€ä¼˜è§£

  - æƒ…å†µ `i.` æ˜¾ç„¶ï¼Œæ²¡æœ‰ç‰©å“æ”¾å…¥æ—¶ï¼Œä»·å€¼ä¹Ÿä¸º0ï¼Œå³ $d(0, 4) = 0$, ä»¥æ­¤ç±»æ¨ $d(0, j) = 0, j \in \\{0, 1, ..., W\\}$
  - æƒ…å†µ `ii.` ä¹Ÿä¸å­˜åœ¨ $W_i < j = 4, i \in \\{0, 1\\}$ï¼Œæ•… $d(1, 4) = 0$
  - å½“ $i=2$ æ—¶ï¼Œå­˜åœ¨ $W_i < j = 4, i \in \\{0, 1, 2\\}$ï¼Œæ­¤æ—¶ $i-1 = 1$ï¼Œå³ $d(2, 4) = V_1 = 3$
  - $i=3$ æ—¶ï¼ŒåŒä¸Šï¼Œ$d(3, 4) = d(2, 4) = 3$
  - $i=4$ æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘æ˜¯å¦è¦å°† $i-1=3$ çš„ç‰©å“æ”¾å…¥èƒŒåŒ…ä¸­
    å¦‚æœä¸æ”¾å…¥ $d(4, 4) = d(3, 4) = 3$
    å¦‚æœæ”¾å…¥åˆ™ $d(4, 4) = d(3, j - W_{i-1}) + V_{i-1} = d(3, 2) + 3 = 0 + 3 = 3$
    
    > å¯¹äºè¿™ç§æƒ…å†µçš„è§£é‡Šï¼Œå¦‚æˆ‘æˆ‘ä»¬è€ƒè™‘å‰ i ä¸ªç‰©å“çš„æœ€ä¼˜è§£ï¼Œåˆ™å°±æ˜¯åœ¨æ±‚æ˜¯å¦è¦å°†ç¬¬ $i-1$ ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…ä¸­å–å¾—çš„æœ€ä¼˜è§£
    
    äºæ˜¯ $d(4,4) = \max\\{d(3, 4), d(3, 2) + 3\\} = \max\\{3, 3\\} = 3$

----

æŒ‰ç…§ä»¥ä¸Šæ¨ç†ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹

$$ d(i, j) = 
  \begin{cases}
    0, & \text{if $i=0$ or $j=0$} \\\\
    d(i-1, j), & \text{if $d(i-1, j) > d(i-1, j-W_{i-1}) + V_{i-1}$} \\\\
    d(i-1, j-W_{i-1}) + V_{i-1}, & \text{otherwise} \\\\
  \end{cases} 
$$

## Golang å®ç°

ä»¥ä¸Šé¢çš„ä¾‹å­ä¸ºä¾‹

### main

``` go
func backpack(w, v []int, W int) int {
  size := len(w)
  dp := make([][]int, W+1)
  for j := 0; j <= W; j++ {
    dp[j] = make([]int, size+1)
  }

  for j := 1; j <= W; j++ {
    for i := 1; i <= size; i++ {
      weight := w[i-1]
      if weight > j {
        dp[j][i] = dp[j][i-1]
        continue
      }
      dp[j][i] = dp[j-weight][i-1] + v[i-1]
      if dp[j][i-1] > dp[j][i] {
        dp[j][i] = dp[j][i-1]
      }
    }
  }

  return dp[W][size]
}
```

### unit test

``` go
import "testing"

func Test_backpack(t *testing.T) {
  type args struct {
    w []int
    v []int
    W int
  }
  tests := []struct {
    name string
    args args
    want int
  }{
    {"13", args{
      []int{5, 4, 7, 2, 6},
      []int{12, 3, 10, 3, 6},
      13}, 22},
  }
  for _, tt := range tests {
    t.Run(tt.name, func(t *testing.T) {
      if got := backpack(tt.args.w, tt.args.v, tt.args.W); got != tt.want {
        t.Errorf("backpack() = %v, want %v", got, tt.want)
      }
    })
  }
}
```

# å‚è€ƒé“¾æ¥

- [ã€ŠåŠ¨æ€è§„åˆ’ï¼šä»æ–°æ‰‹åˆ°ä¸“å®¶ã€‹ - Hawstein](http://www.hawstein.com/posts/dp-novice-to-advanced.html)
- [ã€ŠåŠ¨æ€è§„åˆ’ä¹‹èƒŒåŒ…é—®é¢˜ï¼ˆä¸€ï¼‰ã€‹ - Hawstein](http://www.hawstein.com/posts/dp-knapsack.html)
- [èƒŒåŒ…é—®é¢˜ - (ç»´åŸºç™¾ç§‘)](https://zh.wikipedia.org/wiki/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98)
- [ã€Š0-1èƒŒåŒ…é—®é¢˜çš„åŠ¨æ€è§„åˆ’ç®—æ³•ã€‹ - çŸ¥ä¹Â·Batç‰¹ç™½](https://zhuanlan.zhihu.com/p/30959069)
